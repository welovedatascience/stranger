<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Data visualizations of anomaly score locally around a specific data point — plot.stranger • stranger</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Data visualizations of anomaly score locally around a specific data point — plot.stranger"><meta property="og:description" content="Data visualizations of anomaly score locally around a specific data point"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stranger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/stranger_for_the_impatient.html">stranger for the impatient</a>
    </li>
    <li>
      <a href="../articles/stranger_weirds_methods.html">stranger weirds methods</a>
    </li>
    <li>
      <a href="../articles/working_with_weirds.html">working with weirds</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Data visualizations of anomaly score locally around a specific data point</h1>
    
    <div class="hidden name"><code>plot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Data visualizations of anomaly score locally around a specific data point</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for stranger</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="st">"cluster"</span>, id <span class="op">=</span> <span class="st">".id"</span>, score <span class="op">=</span> <span class="cn">NULL</span>, anomaly_id <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for fortifiedanomaly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"feature_importance"</span>,</span>
<span>  id <span class="op">=</span> <span class="st">".id"</span>,</span>
<span>  anomaly_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  score <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for anomalies</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="st">"feature_importance"</span>, id <span class="op">=</span> <span class="st">".id"</span>, anomaly_id <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for singular</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="st">"cluster"</span>, id <span class="op">=</span> <span class="st">".id"</span>, score <span class="op">=</span> <span class="cn">NULL</span>, anomaly_id <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>type</dt>
<dd><p>is the name of the visualization;
(1) A hierarchical clustering, named "cluster", showing among the top n-anomaly which records belongs to the same cluster
a specific record. Finding the commun pattern amoung the cluster may lead to the orign of of the specifi record score.
(2) A dots plot, named "neighbours", showing the relationship between the anomly score and each feature for the
k nearest neighbours of a specific record.
(3) A bar chart, named "feature_importance", showing how sensitive is the anomaly score of a specific record to each of feature.
This may help to identify the features behind the score.
(4) A dots plot, names "score_decline", showing the decrease in anomaly score among the k nearest neighbours of a specific record.
The shape indicates how extrem and how frequent is the anomaly score of a speicif record amoung its neighbours.
(5) A Regression tree, named "regression_tree", showing the roots to high score around a specific record.</p></dd>


<dt>id</dt>
<dd><p>is the colname with records IDs</p></dd>


<dt>score</dt>
<dd><p>is the colname which contains the anomaly score</p></dd>


<dt>anomaly_id</dt>
<dd><p>is the record ID you want to investigate</p></dd>


<dt>data</dt>
<dd><p>is either of class dataframe, stranger or anomaly. It contains the observations; each row represents an observation
and each variable is stored in one column. It must have at least one column with IDs and one column with the anomaly
score for each ID.</p></dd>


<dt>check</dt>
<dd><p>logical indicating if object data should be checked for validity. The default is TRUE, this check is not necessary
when data is known to be valid such as when it is the direct result of stranger().</p></dd>


<dt>keep</dt>
<dd><p>character vector: names of columns to keep (filter)</p></dd>


<dt>drop</dt>
<dd><p>character vector: names of columns to drop (filter)</p></dd>


<dt>n.cluster</dt>
<dd><p>is the number of cluster groups to emphasis.
This parameter must only be specified with type ="cluster".</p></dd>


<dt>n.anom</dt>
<dd><p>is the number of top anomalies to be considered.
This parameter must only be specified with type ="cluster".</p></dd>


<dt>k</dt>
<dd><p>is the number of neighbours to be considered. This parameter must always be specified,
except with type = "cluster".</p></dd>


<dt>n_label</dt>
<dd><p>specifies the number of data point to be labelled in the plot.
This parameter must only be specified with type ="scores_decline".</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A plot</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Function that produces visualizations to understand the anomaly score locally around a specific data point.
We believe this should help people to trust scores a made by models even if they don’t fully understand them.
Today, 5 visualisazions are implemented;
(1) A hierarchical clustering, named "cluster", showing among the top n-anomaly which records belongs to the same cluster
a specific record. Finding the commun pattern amoung the cluster may lead to the orign of of the specifi record score.
(2) A dots plot, named "neighbours", showing the relationship between the anomly score and each feature for the
k nearest neighbours of a specific record.
(3) A bar chart, named "feature_importance", showing how sensitive is the anomaly score of a specific record to each of feature.
This may help to identify the features behind the score.
(4) A dots plot, names "score_decline", showing the decrease in anomaly score among the k nearest neighbours of a specific record.
The shape indicates how extrem and how frequent is the anomaly score of a speicif record amoung its neighbours.
(5) A Regression tree, named "regression_tree", showing the roots to high score around a specific record.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="crazyfy.html">crazyfy</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">anom1</span><span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="strange.html">strange</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/fortify.html" class="external-link">fortify</a></span><span class="op">(</span><span class="va">anom1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">investigate</span><span class="op">(</span><span class="va">result</span>, type<span class="op">=</span><span class="st">"cluster"</span>, id <span class="op">=</span> <span class="st">".id"</span>, score <span class="op">=</span> <span class="st">"knn_k_10_mean"</span>, anomaly_id <span class="op">=</span> <span class="fl">10</span>, n.cluster <span class="op">=</span> <span class="fl">4</span>, n.anom <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in investigate(result, type = "cluster", id = ".id", score = "knn_k_10_mean",     anomaly_id = 10, n.cluster = 4, n.anom = 50):</span> could not find function "investigate"</span>
<span class="r-in"><span><span class="fu">investigate</span><span class="op">(</span><span class="va">result</span>, type<span class="op">=</span><span class="st">"neighbours"</span>, id <span class="op">=</span> <span class="st">".id"</span>, score <span class="op">=</span> <span class="st">"knn_k_10_mean"</span>, anomaly_id <span class="op">=</span> <span class="fl">10</span>, k <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in investigate(result, type = "neighbours", id = ".id", score = "knn_k_10_mean",     anomaly_id = 10, k = 200):</span> could not find function "investigate"</span>
<span class="r-in"><span><span class="fu">investigate</span><span class="op">(</span><span class="va">result</span>, type<span class="op">=</span><span class="st">"feature_importance"</span>, id <span class="op">=</span> <span class="st">".id"</span>, score <span class="op">=</span> <span class="st">"knn_k_10_mean"</span>, anomaly_id <span class="op">=</span> <span class="fl">10</span>, k <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in investigate(result, type = "feature_importance", id = ".id",     score = "knn_k_10_mean", anomaly_id = 10, k = 100):</span> could not find function "investigate"</span>
<span class="r-in"><span><span class="fu">investigate</span><span class="op">(</span><span class="va">result</span>, type<span class="op">=</span><span class="st">"scores_decline"</span>, id <span class="op">=</span> <span class="st">".id"</span>, score <span class="op">=</span> <span class="st">"knn_k_10_mean"</span>, anomaly_id <span class="op">=</span> <span class="fl">10</span>, k <span class="op">=</span> <span class="fl">50</span>, n_label <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in investigate(result, type = "scores_decline", id = ".id", score = "knn_k_10_mean",     anomaly_id = 10, k = 50, n_label = 10):</span> could not find function "investigate"</span>
<span class="r-in"><span><span class="fu">investigate</span><span class="op">(</span><span class="va">result</span>, type<span class="op">=</span><span class="st">"regression_tree"</span>, id <span class="op">=</span> <span class="st">".id"</span>, score <span class="op">=</span> <span class="st">"knn_k_10_mean"</span>, anomaly_id <span class="op">=</span> <span class="fl">10</span>, k <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in investigate(result, type = "regression_tree", id = ".id", score = "knn_k_10_mean",     anomaly_id = 10, k = 1000):</span> could not find function "investigate"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eric Lecoutre, Sven Wauters.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

